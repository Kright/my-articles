---
title: "Делаю демо с автомобилем и корректной физикой 4"
author: Kright
date: 2025-06-07
---

Я что-то долго прокраситинировал и не знал как подступиться к модели шин.

# Новая модель шин

Я посмотрел всякие видео со деформирующимися шинами и обратил внимание, что шины обычно всё равно круглые, просто немножко смещённые или повёрнутые относительно диска. Так что теперь у меня колесо это два физических тела - колёсный диск и отдельно цилиндр-шина на пружинках.

Внезапно оказалось, что даже такое простое действие дало интересные эффекты. Например, при резком старте колесо может начать подпрыгивать. А на поворот руля реакция не мгновенная, потому что сначала шина немножко уходит вбок и только потом появляется реакция на руле. В общем, руль стал более пустым в околонулевом положении, а реакция на поворот может возникнуть с небольшой задержкой. На большой скорости из-за этого управление становится более резким - чем-то похоже на реальные жигули на скорости больше 100 км/ч.

Силу эффекта можно варьировать, меняя высоту профиля колёс и жёсткость пружин, а тестировал специально на 13 колёсах с очень высоким профилем, чтобы эффект чувствовался максимально сильно.

Записал коротенькую демонстрацию: https://www.youtube.com/watch?v=wqt0ylxBqnU

В реальности эффект подпрыгивания и смещения шины относительно диска можно увидеть в драг заездах: https://www.youtube.com/watch?v=gXp2QgY1OB8
Там специальные очень мягкие шины и очень липкий асфальт и дико большим коэффициентом трения, поэтому эффекты очень хорошо видно.

По-хорошему надо бы развивать модель шин дальше и подбирать настройки, но я пока это не делал.

# Дифференциал повышенного трения

Вместо открытого дифференциала написал универсальный класс для любого, в котором параметрами можно задавать преднатяг и степень блокировки при ускорении и при торможении двигателем. Открытый и закрытый дифференциалы - частные случаи, когда преднатяга и блокировки вообще нет или когда преднатяг бесконечно большой.

Есть два способа описать степень блокировки. Либо числами типа 2-3 (когда на одном колесе может быть в 2-3 раза больше тяги, чем на другом), либо процентами от 0 до 100%. 0% значит полностью открытый дифференциал, 100 % полностью заблоченный, а, например 40% блокировки значат, что на одном колесе может быть 30% тяги, на другом 70% = (30% + 40%). А в виде числа это будет 30:70 = 3:7 = 1:2.333(3).

Кроме того, степень блокировки может быть разной в случаях, когда двигатель ускоряет колёса или когда происходит торможение двигателем. Например, в дрифте делают, чтобы на ускорении дифференциал блокировался, а при отпускании газа или нажатии сцепления становился открытым.

А ещё есть преднатяг. Обычно его делают пружинками, которые прижимают фрикционы друг к другу и обеспечивают какое-то трение в дифференциале даже при нулевой тяге двигателя.

Ещё интересный момент - оказывается, преднатяг может быть в другую сторону (отрицательный). Тогда получился, что при малой тяге дифференциал всё ещё открытый и только при большой - закроется. И коэффициент блокировки в теории тоже можно попытаться сделать отрицательным - например, чтобы без тяги двигателя был преднатяг, а при торможении двигателем дифференциал превращался в полностью открытый.

Наверно это какая-то экзотика, но я сделал универсальный класс "для всего" и дальше остаётся только подгонять коэффициенты.

Подробнее про конструкцию дифференциала и механизмы блокировки можно почитать [в википедии](https://ru.wikipedia.org/wiki/%D0%94%D0%B8%D1%84%D1%84%D0%B5%D1%80%D0%B5%D0%BD%D1%86%D0%B8%D0%B0%D0%BB_%D1%81_%D0%BF%D0%BE%D0%B2%D1%8B%D1%88%D0%B5%D0%BD%D0%BD%D1%8B%D0%BC_%D0%B2%D0%BD%D1%83%D1%82%D1%80%D0%B5%D0%BD%D0%BD%D0%B8%D0%BC_%D1%81%D0%BE%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC).

Я покатался на разных конфигурациях и пришёл к выводу что дифференциал повышенного трения это самый классный вариант.

Итак, на открытом дифференциале всё хорошо, кроме одного сценария - если в повороте сильно нажать на газ, то внутреннее колесо может начать проскальзывать. Причём оно будет проскальзывать и раскручиваться, набирая скорость, а на внешнем тяга будет такая же как на внутреннем. И ещё противный момент - внутреннее колесо может очень сильно раскрутиться и потом при отпускании газа будет какое-то время проскальзывать по асфальту и замедляться обратно.

На залоченном дифференциале езда очень своеобразная - колёса крутятся с одинаковой скоростью и сильно мешают поворачивать. Получается сильная недостаточная поворачиваемость. В повороте можно нажать на газ, тогда внутреннее колесо будет точно так же скользить, и весь крутящий момент пойдёт на внешнее колесо. Из-за этого под газом ведущие колёса будут доворачивать машину. Если с газом переборщить - сорвутся оба колеса и машина пойдёт в занос.
В реальной жизни такое можно почувствовать в картинге.

А вот дифференциал повышенного трения это кайф - при отпущенной педали газа или при слабой тяге сила трения слабая и дифференциал почти не мешает поворачивать. При большой тяге превращается в заблокированный дифференциал и начинает толкаться внешним колесом. И ещё хороший момент - внутреннее колесо не будет бесконтрольно раскручиваться, оно будет крутиться со скоростью внешнего.

На внедорожных машинах бывает диагональное вывешивание, когда одно из колёс оказывается в воздухе. В таком случае помогают преднатяг (если есть) и слабое нажатие на тормоз (или использование ручника). Тогда получается, что на вывешенном колесе есть, допустим, 100 Ньютон-метров крутящего момента, которые даёт поджатый тормоз, а на внутреннем благодяра дифференциалу - все 300. Из которых около 100 заберёт поджатый тормоз и ещё 200 останутся для движения.

Ещё в википедии пишут, что для какой-то совсем внедорожной техники бывают дифференциалы с коэффициентом блокировки вплоть до 10, хотя для обычных машин он порядка 2-3 (30%-50%)














